# php-class-Err

Error handling class for PHP. Handles all errors generated by PHP, enables logging, instant feedback for debugging and fails gracefully.

##Basic set up

Create a directory for the log files and add two empty files called background.txt and terminate.txt.

Initialise Err as early as possible and tell it where the log directory is.

```php
<?php

include '/path/to/Err.php';

Err::initialise([
  'log_directory' => '/path/to/log/dir'
]);

```

##Error types

The class categorises errors as three types, *ignore*, *background* and *terminate*. It is set up with default values which can be overwritten if needed. Only *ignore* and *background* values are set, anything else is considered *terminate*.

If only *ignore* errors occur during run time, nothing is logged and the script runs as intended.

If any *background* errors occur on top of any *ignore* errors, then all errors will be logged in the defined background file.

If any errors occur that are not listed in *ignore* or *background* then the script will terminate. Errors will be dumped to screen, or logged in the defined terminate file depending on the property value for $termination_message.

Here is an example of initialisation including defining error types (this example sets the defult values).

```php
<?php

include '/path/to/Err.php';

Err::initialise([
  'log_directory' => '/path/to/log/dir',
  'errors_background' => E_WARNING | E_CORE_WARNING | E_COMPILE_WARNING | E_USER_WARNING | E_DEPRECATED | E_USER_DEPRECATED,
  'errors_ignore' => E_NOTICE | E_USER_NOTICE
]);

```

##Termination message

By default, if the class encounters a *terminate* error it will dump the entire error log to screen. A string can be echo'd instead and the error will be logged to the defined terminate file. 

Here is how to set the termination message during initialisation.

```php
<?php

include '/path/to/Err.php';

Err::initialise([
  'log_directory' => '/path/to/log/dir',
  'termination_message' => '<h1>Sorry</h1><hr><p>Something went wrong. We have logged the error.</p>'
]);

```
